<div class="camera-container">
  <!-- Kamera-Abschnitt Header -->
  <h2 (click)="cameraPanelOpen = !cameraPanelOpen" style="cursor: pointer;">
    üì∑ Kamera {{ cameraPanelOpen ? '‚ñ≤' : '‚ñº' }}
  </h2>

  <!-- Versteckbarer Kamera-Container -->
  @if (cameraPanelOpen) {
  <section>
    <!-- Kamera-Video -->
    <video #videoElement width="320" height="240" autoplay *ngIf="showCamera()"></video>

    <!-- Bild ausw√§hlen oder aufnehmen -->
    <section class="add-image">
      <h3>Bild ausw√§hlen oder aufnehmen</h3>
      <input type="file" id="fileInput" accept="image/*" (change)="onFileSelected($event)" hidden />
      <button type="button" (click)="selectImage()">Bild ausw√§hlen</button>
      <button type="button" (click)="showCamera.set(!showCamera())">
        {{ showCamera() ? 'Kamera schlie√üen' : 'Kamera √∂ffnen' }}
      </button>
    </section>

    <!-- Kamera Steuerung -->
    <div class="camera-controls">
      <label for="cameraActionSelect">Kamera-Aktion ausw√§hlen:</label>
      <select id="cameraActionSelect" [(ngModel)]="selectedCameraAction">
        <option [ngValue]="null" disabled selected>Aktion w√§hlen...</option>
        <option *ngFor="let action of cameraActions" [ngValue]="action">{{ action.label }}</option>
      </select>
      <button type="button" (click)="onCameraActionSelect()">Ausf√ºhren</button>
    </div>

    <!-- Aufgenommenes Bild anzeigen -->
    @if (capturedImage) {
    <div style="margin-top: 10px;">
      <img [src]="capturedImage" alt="Aufgenommenes Bild" style="max-width: 100%; border: 1px solid #ccc;" />
      <button type="button" (click)="downloadImage()">Bild herunterladen</button>
    </div>
    }
  </section>
  }

  <!-- Bildbearbeitung mit Cropper -->
  @if (showCropper() && imageToEdit) {
  <section class="image-editing">
    <h3>üõ†Ô∏è Bild bearbeiten</h3>

    <app-cropper-functions [imageSrc]="imageToEdit" [shape]="cropShape()" (cropped)="onCropped($event)">
    </app-cropper-functions>

    <!-- Formauswahl -->
    <div class="shape-options">
      <h4>Als Form speichern:</h4>
      <button (click)="setCropShape('oval')">Oval</button>
      <button (click)="setCropShape('circle')">Rund</button>
      <button (click)="setCropShape('square')">Viereckig</button>
    <!-- Erweiterte Funktionen -->
    <div class="advanced-options">
      <h4>Weitere Funktionen:</h4>
      <div class="filter-controls">
        <label>Kontrast:
          <input type="range" min="50" max="200" [(ngModel)]="contrast" (input)="applyFilters()" />
        </label>
        <label>Helligkeit:
          <input type="range" min="50" max="200" [(ngModel)]="brightness" (input)="applyFilters()" />
        </label>
      </div>
      <div class="rotate-controls">
        <button type="button" (click)="rotateImage(90)">‚Üª 90¬∞ drehen</button>
        <button type="button" (click)="flipImage('horizontal')">‚Üî Spiegeln</button>
        <button type="button" (click)="flipImage('vertical')">‚Üï Spiegeln</button>
      </div>
      <div class="zoom-controls">
        <label>Zoom:
          <input type="range" min="1" max="3" step="0.1" [(ngModel)]="zoom" (input)="applyZoom()" />
        </label>
      </div>
    </div>
    </div>
  </section>
  }

  <!-- Vorschau des bearbeiteten Bildes -->
  @if (croppedImage) {
  <div class="preview" style="margin-top: 20px;">
    <h4>Vorschau:</h4>
    <img [src]="croppedImage" alt="Bearbeitetes Bild" style="max-width: 100%; border: 1px solid #ccc;" />
  </div>
  }
</div>
