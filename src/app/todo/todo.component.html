<!-- Aufgabenliste -->
<section class="todo-list">
  <h2>ğŸ“‹ Aktuelle Aufgaben</h2>
  <ul>
    <li *ngFor="let todo of todos; let i = index">
      <span>{{ todo.text }}</span>
      <img
        *ngIf="todo.image"
        [src]="todo.image"
        alt="Bild"
        width="50"
        (click)="openCropperFromImage(todo.image)"
        style="cursor:pointer;"
      />
      <button (click)="editImage(i)">âœï¸ Bearbeiten</button>
      <button (click)="removeTodo(i)">ğŸ—‘ï¸ Entfernen</button>
    </li>
  </ul>
</section>

<!-- Tools -->
<section>
  <button (click)="toggle('camera')">ğŸ“· Kamera anzeigen</button>
  <button (click)="toggle('cropper')">âœ‚ï¸ Bildeditor Ã¶ffnen</button>
  <button (click)="toggle('calendar')">ğŸ“… Kalender anzeigen</button>
</section>

<!-- Kamera -->
<app-camera-functions
  *ngIf="showCamera"
  (captured)="onCameraImage($event)">
</app-camera-functions>

<!-- Cropper -->
<app-cropper-functions
  *ngIf="showCropper && imageToEdit"
  [imageSrc]="imageToEdit"
  (cropped)="onCropped($event)">
</app-cropper-functions>

<!-- Kalender -->
<app-calendar *ngIf="showCalendar"></app-calendar>

<!-- Bearbeitetes Bild -->
<section *ngIf="croppedImage">
  <h3>ğŸ–¼ï¸ Bearbeitetes Bild</h3>
  <div class="image-editor">
    <img
      [src]="croppedImage"
      [style.filter]="isBlackAndWhite ? 'grayscale(100%)' : ''"
      [style.background]="backgroundColor"
      class="preview-image"
    />
    <div class="controls">
      <label>
        Hintergrundfarbe:
        <input type="color" [(ngModel)]="backgroundColor" />
      </label>
      <label>
        <input type="checkbox" [(ngModel)]="isBlackAndWhite" />
        Schwarz/WeiÃŸ
      </label>
    </div>
    <button (click)="saveImage()">ğŸ’¾ Bild speichern</button>
  </div>
</section>
