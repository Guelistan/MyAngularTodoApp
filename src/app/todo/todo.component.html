<div class="todo-container">
  <h1>📝 Meine Todo-App</h1>

  <!-- Neue Aufgabe hinzufügen -->
  <section class="add-todo">
    <input [(ngModel)]="todoInput" placeholder="Neuer Task" (input)="onInput($event.target.value)" />
    <input type="text" [(ngModel)]="imageInput" placeholder="Bild-URL (optional)" />
    <button (click)="addTodo()">➕ Hinzufügen</button>
  </section>

  <!-- Aktuelle Aufgaben -->
  <section class="todo-list">
    <h2>📋 Aktuelle Aufgaben</h2>
    <ul>
      <li *ngFor="let todo of todos; let i = index">
        <span [style.color]="getRandomColor()">{{ todo.text }}</span>
        <img *ngIf="todo.image" [src]="todo.image" alt="Bild" width="50" />
        <button (click)="removeTodo(i)">🗑️ Entfernen</button>
      </li>
    </ul>
    <button (click)="saveTodos()">💾 Aufgaben speichern</button>
  </section>
  <!-- <app-cropper (cropped)="onImageCropped($event)"></app-cropper> -->
  <section class="image-preview">
    <h2>🖼️ Bildvorschau</h2>
    <img *ngIf="imageInput" [src]="imageInput" alt="Zugeschnittenes Bild" width="100" />
    <!-- Verlauf -->
    <section class="history">
      <h2>✅ Erledigte Aufgaben (Verlauf)</h2>
      <ul>
        <li *ngFor="let item of history">{{ item }}</li>
      </ul>
      <button (click)="clearHistory()">🧹 Verlauf löschen</button>
    </section>

    <!-- Kalender -->
    <section class="calendar">
      <h2>
        📅 {{ currentDate | date: 'MMMM yyyy' }}
        <button (click)="previousMonth()">⏮️</button>
        <button (click)="nextMonth()">⏭️</button>
      </h2>
      <div class="days">
        <div *ngFor="let day of daysInMonth" class="day" [class.today]="isToday(day)">
          {{ day }}
        </div>
      </div>
    </section>

    <!-- Bild zuschneiden -->
    <section class="image-cropper">
      <h2>🖼️ Bild zuschneiden</h2>
      <app-cropper-functions (imageCropped)="onImageCropped($event)"></app-cropper-functions>
    </section>
</div>
<section class="add-todo">
  <input [(ngModel)]="todoInput" placeholder="Neuer Task" (input)="onInput($event.target.value)" />

  <!-- Bild-Cropper statt Bild-URL -->
  <app-cropper-functions (imageCropped)="onImageCropped($event)"></app-cropper-functions>
  <div>
    <h2>Bild auswählen oder aufnehmen</h2>
    <input type="file" accept="image/*" (change)="onFileSelected($event)" />
    <button (click)="showCamera = !showCamera">
      {{ showCamera ? 'Kamera schließen' : 'Kamera öffnen' }}
    </button>
    <app-camera-functions *ngIf="showCamera" (captured)="onCameraImage($event)"></app-camera-functions>
  </div>

  <div *ngIf="imageToEdit">
    <h3>Bild bearbeiten</h3>
    <app-cropper [imageSrc]="imageToEdit" (cropped)="onCropped($event)"></app-cropper>
  </div>
  <div *ngIf="croppedImage">
    <h3>Bearbeitetes Bild</h3>
    <div style="display: flex; flex-direction: column; align-items: center;">
      <img [src]="croppedImage" [style.filter]="isBlackAndWhite ? 'grayscale(100%)' : ''"
        [style.background]="backgroundColor"
        style="max-width: 300px; width: 200px; height: 200px; object-fit: cover; border-radius: 50%; border: 4px solid #333; display: block;" />
      <div style="margin: 10px 0;">
        <label>
          Hintergrundfarbe:
          <input type="color" [(ngModel)]="backgroundColor" />
        </label>
        <label style="margin-left: 20px;">
          <input type="checkbox" [(ngModel)]="isBlackAndWhite" />
          Schwarz/Weiß
        </label>
      </div>
      <button (click)="saveImage()">Bild speichern</button>
    </div>
  </div>
  <button (click)="addTodo()">➕ Hinzufügen</button>
</section>
<div *ngIf="imageInput">
  <h4>Vorschau des zugeschnittenen Bilds:</h4>
  <img [src]="imageInput" width="100" />
</div>
<app-cropper-functions (imageCropped)="onImageCropped($event)"></app-cropper-functions>

<div class="todo-container">