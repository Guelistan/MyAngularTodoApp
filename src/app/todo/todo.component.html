<div class="todo-container" [class.dark-mode]="isDarkMode()">
  <h1>ğŸ“ Meine Todo-App</h1>

  <section class="add-todo">
    <input [(ngModel)]="todoInput" placeholder="Neuer Task" />
    <input type="text" [(ngModel)]="imageInput" placeholder="Bild-URL (optional)" />
    <button (click)="addTodo()">â• HinzufÃ¼gen</button>
  </section>

  <section class="todo-list">
    <h2>ğŸ“‹ Aktuelle Aufgaben</h2>
    <ul>
      <li *ngFor="let todo of todos; let i = index">
        <span>{{ todo.text }}</span>
        <img *ngIf="todo.image" [src]="todo.image" alt="Bild" width="50" />
        <button (click)="removeTodo(i)">ğŸ—‘ï¸ Entfernen</button>
        <button (click)="editImage(i)">âœï¸ Bearbeiten</button>
      </li>
    </ul>
    <button (click)="saveTodos()">ğŸ’¾ Aufgaben speichern</button>
  </section>

  <section class="image-preview" *ngIf="imageInput">
    <h2>ğŸ–¼ï¸ Bildvorschau</h2>
    <img [src]="imageInput" alt="Bildvorschau" width="100" />
  </section>

  <section class="history">
    <h2>âœ… Erledigte Aufgaben (Verlauf)</h2>
    <ul>
      <li *ngFor="let item of history">{{ item }}</li>
    </ul>
    <button (click)="clearHistory()">ğŸ§¹ Verlauf lÃ¶schen</button>
  </section>

  <section class="calendar">
    <h2>
      ğŸ“… {{ currentDate | date: 'MMMM yyyy' }}
      <button (click)="previousMonth()">â®ï¸</button>
      <button (click)="nextMonth()">â­ï¸</button>
    </h2>
    <div class="days">
      <div *ngFor="let day of daysInMonth" class="day" [class.today]="isToday(day)">
        {{ day }}
      </div>
    </div>
  </section>

  <section *ngIf="croppedImage">
    <h3>Bearbeitetes Bild</h3>
    <div class="image-editor">
      <img [src]="croppedImage"
           [style.filter]="isBlackAndWhite ? 'grayscale(100%)' : ''"
           [style.background]="backgroundColor"
           class="preview-image" />
      <div class="controls">
        <label>
          Hintergrundfarbe:
          <input type="color" [(ngModel)]="backgroundColor" />
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="isBlackAndWhite" />
          Schwarz/WeiÃŸ
        </label>
      </div>
      <button (click)="saveImage()">Bild speichern</button>
    </div>
  </section>

  <button (click)="toggleDarkMode()">ğŸŒ™ Dark Mode umschalten</button>
  <button (click)="toggleBlackAndWhite()">ğŸŒ“ Schwarz/WeiÃŸ umschalten</button>

  <app-camera-functions (captured)="onCameraImage($event)"></app-camera-functions>
  <app-cropper-functions
    *ngIf="imageToEdit"
    [imageSrc]="imageToEdit"
    (cropped)="onCropped($event)">
  </app-cropper-functions>
</div>
